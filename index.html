<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recognise the Signs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Brand Colours: #C6B4D9, #513873, #413659, #F2F2F2, #9C7F9D */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F6F5F8; 
            color: #413659; 
            padding: 1rem;
            min-height: 100vh;
        }
        .main-container {
            max-width: 800px; 
            margin: 0 auto;
        }
        .sign-heading {
            color: #513873; 
            font-weight: 700;
        }
        .power-control-header {
            background-color: #513873; 
            color: #F2F2F2;
            padding: 1.5rem; 
            border-radius: 8px;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .accordion-item {
            border: 1px solid #C6B4D9; 
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 0.75rem;
            transition: box-shadow 0.2s ease-in-out;
            background-color: #FFF;
        }
        .accordion-item:hover {
            box-shadow: 0 4px 10px rgba(81, 56, 115, 0.1);
        }
        .accordion-button {
            width: 100%;
            text-align: left;
            padding: 1rem;
            background-color: #C6B4D9; 
            color: #413659;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }
        .accordion-button:hover {
            background-color: #9C7F9D; 
        }
        .accordion-content {
            padding: 0 1.5rem 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
            background-color: #FFF;
            border-top: 1px solid #C6B4D9;
        }
        .category-label {
            background-color: #413659;
            color: #C6B4D9;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-right: 0.5rem;
        }
        .arrow-icon {
            transition: transform 0.2s;
        }
        .rotated {
            transform: rotate(180deg);
        }
        .content-block {
            padding-bottom: 1.25rem;
        }
        .icon-container {
            flex-shrink: 0;
            margin-right: 0.75rem;
            margin-top: 0.25rem;
        }
        
        /* Nested Content Styling for Click-and-Reveal */
        .nested-content {
            transition: max-height 0.2s ease-out; /* Fast, click-and-reveal feel */
            max-height: 0;
            padding: 0; 
            margin-top: 0;
            background-color: transparent; 
            box-sizing: border-box; 
            border-radius: 0.5rem;
        }
        
        /* The inner wrapper that holds the content and padding */
        .nested-reveal-content {
            transition: padding 0.2s ease-out;
            padding: 0; /* Starts with no padding */
        }

        strong {
            color: #513873;
        }
    </style>
</head>
<body>

    <div class="main-container">
        <header class="mb-6 text-center">
            <h1 class="text-3xl sign-heading mb-1 font-extrabold">
                Recognise the Signs
            </h1>
            <p class="text-gray-500">Select a sign below to see what to look for and a workplace example.</p>
        </header>
        
        <!-- Power and Control Context (Static, non-interactive) -->
        <div class="power-control-header text-center">
            <h2 class="text-xl font-bold mb-1">The Big Picture: Power and Control</h2>
            <p class="text-sm mt-1">These signs are small parts of a larger plan to control another person. They usually happen together, not just once.</p>
        </div>

        <div id="accordion">
            <!-- Content will be generated here -->
        </div>

    </div>

    <script>
        const signsData = [
            {
                sign: "Unexplained Injuries",
                category: "Physical",
                definition: "You see bruises or cuts that don't match the person's story. They might also wear clothes to hide these injuries.",
                lookFor: "Check for injuries in non-visible areas, deflective answers like 'walking into a cupboard,' or wearing long sleeves/scarves in hot weather.",
                clubExample: "A staff member comes to work with a bruise on their arm. When you ask if they are okay, they look nervous, laugh it off, or change the subject quickly."
            },
            {
                sign: "Checking In Constantly",
                category: "Control",
                definition: "The partner calls or texts too much during work hours. They want to know exactly where the person is and what they are doing.",
                lookFor: "The person seems <strong>anxious</strong> when their phone rings. They might rush to answer messages immediately or look scared if they miss a call.",
                clubExample: "A bartender gets non-stop text messages from their partner during a busy shift. They seem worried and rush to reply whenever they get a spare second."
            },
            {
                sign: "Isolation (Pulling Away)",
                category: "Isolation",
                definition: "The person stops seeing friends or joining in social activities. They might say they need 'permission' to go out.",
                lookFor: "Someone who used to be social now stays away from staff events. They might stop eating lunch with others or say they have to go straight home after work.",
                clubExample: "A colleague who used to love chatting in the staff room now sits alone. They turn down invites to staff drinks, saying their partner expects them home immediately."
            },
            {
                sign: "Money Control",
                category: "Financial",
                definition: "The partner controls all the money. The person has to ask for cash or explain every cent they spend.",
                lookFor: "Asking to borrow money for lunch or transport. They might not have access to their own bank cards or they worry about spending even a small amount.",
                clubExample: "A staff member asks to pick up extra shifts for cash, but says they can't access their own bank account to buy lunch because their partner keeps the card."
            },
            {
                sign: "Sabotage at Work",
                category: "Work",
                definition: "The partner tries to make the person lose their job. They might start arguments before work or hide keys so the person is late.",
                lookFor: "A reliable worker suddenly starts arriving late or missing shifts. The excuses often seem strange or happen specifically on work days.",
                clubExample: "A usually reliable worker starts calling in sick or arriving late. They mention 'car trouble' or that their partner 'lost the keys' again right before their shift."
            }
        ];

        function createSignElement(data, index) {
            const item = document.createElement('div');
            item.className = 'accordion-item';

            const button = document.createElement('button');
            button.className = 'accordion-button';
            button.setAttribute('aria-expanded', 'false');
            button.onclick = () => toggleAccordion(item, button, index);
            
            button.innerHTML = `
                <span class="flex items-center">
                    <span class="category-label">${data.category}</span>
                    <span>${data.sign}</span>
                </span>
                <span class="arrow-icon transition-transform duration-200">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </span>
            `;

            const content = document.createElement('div');
            content.className = 'accordion-content';
            content.id = `content-${index}`;

            // Icons for nested buttons
            const iconLookFor = `<svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7z"></path><circle cx="12" cy="12" r="3"></circle></svg>`;
            const iconExample = `<svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z"></path><circle cx="12" cy="10" r="3"></circle></svg>`;


            // Static Definition Block
            let innerContent = `
                <div class="content-block pt-3 border-b border-gray-100 flex items-start pb-4">
                    <div class="icon-container">
                        <!-- Shield/Definition Icon -->
                        <svg class="w-5 h-5 text-[#513873]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                    </div>
                    <div>
                        <p class="font-bold text-base mb-1 text-[#513873]">What is this?</p>
                        <p>${data.definition}</p>
                    </div>
                </div>
            `;
            
            // Nested Item 1: What to Look For (Click-and-Reveal)
            innerContent += `
                <div class="nested-block-wrapper my-3">
                    <div class="flex justify-center w-full">
                        <button class="nested-button w-full sm:w-2/3 flex items-center justify-center p-3 rounded-lg bg-[#9C7F9D] text-white font-semibold transition duration-200 hover:bg-[#866887]"
                                data-target="nested-content-lookfor-${index}">
                            <span class="flex items-center">
                                <span class="mr-2">${iconLookFor}</span>
                                <span>What to Look For</span>
                            </span>
                        </button>
                    </div>
                    
                    <div id="nested-content-lookfor-${index}" class="nested-content overflow-hidden px-4"> 
                        <div class="nested-reveal-content py-4 rounded-lg bg-gray-50 mt-1"> 
                            <p>${data.lookFor}</p>
                        </div>
                    </div>
                </div>
            `;

            // Nested Item 2: Workplace Example (Click-and-Reveal)
            innerContent += `
                <div class="nested-block-wrapper mb-4">
                    <div class="flex justify-center w-full">
                        <button class="nested-button w-full sm:w-2/3 flex items-center justify-center p-3 rounded-lg bg-[#9C7F9D] text-white font-semibold transition duration-200 hover:bg-[#866887]"
                                data-target="nested-content-example-${index}">
                            <span class="flex items-center">
                                <span class="mr-2">${iconExample}</span>
                                <span>Work Example</span>
                            </span>
                        </button>
                    </div>

                    <div id="nested-content-example-${index}" class="nested-content overflow-hidden px-4"> 
                        <div class="nested-reveal-content py-4 rounded-lg bg-gray-50 mt-1"> 
                            <p>${data.clubExample}</p>
                        </div>
                    </div>
                </div>
            `;

            content.innerHTML = innerContent;

            item.appendChild(button);
            item.appendChild(content);
            return item;
        }

        // Toggles the MAIN accordion item
        function toggleAccordion(item, button, index) {
            const content = item.querySelector('.accordion-content');
            const isExpanded = button.getAttribute('aria-expanded') === 'true';
            const icon = item.querySelector('.arrow-icon');
            
            // Close all other main accordion items
            document.querySelectorAll('.accordion-content').forEach((c, cIndex) => {
                if (c.id !== content.id) {
                    c.style.maxHeight = null;
                    c.previousElementSibling.setAttribute('aria-expanded', 'false');
                    c.previousElementSibling.querySelector('.arrow-icon').classList.remove('rotated');
                    
                    // Also forcefully close all nested content inside other parents
                    c.querySelectorAll('.nested-content').forEach(nc => {
                        nc.style.maxHeight = "0px";
                    });
                }
            });

            // Toggle current main item
            if (isExpanded) {
                content.style.maxHeight = null;
                button.setAttribute('aria-expanded', 'false');
                icon.classList.remove('rotated');
                
                // Close nested content when main parent is closed
                content.querySelectorAll('.nested-content').forEach(nc => {
                    nc.style.maxHeight = "0px";
                });

            } else {
                // Open main item. 
                // Using a slightly longer timeout to ensure content has rendered fully before calculating max-height
                setTimeout(() => {
                    content.style.maxHeight = content.scrollHeight + 50 + "px"; // Added buffer for safety
                }, 100); 
                button.setAttribute('aria-expanded', 'true');
                icon.classList.add('rotated');
            }
        }
        
        // Toggles the NESTED click-and-reveal item
        function toggleNestedAccordion(button) {
            const targetId = button.getAttribute('data-target');
            const content = document.getElementById(targetId); // The .nested-content div
            const revealContent = content.querySelector('.nested-reveal-content'); // The div with actual text and styling

            // Check if content is currently open
            const isOpen = content.style.maxHeight !== "0px" && content.style.maxHeight !== "";

            if (isOpen) {
                // CLOSE
                content.style.maxHeight = "0px"; // Collapse the outer container
            } else {
                // OPEN
                // To prevent clipping, we ensure the inner content is fully rendered
                // then set the outer container's maxHeight to match its scrollHeight.
                content.style.maxHeight = revealContent.scrollHeight + "px"; // Set to inner content's height
            }
            
            // Recalculate parent accordion height
            let parentContent = button.closest('.accordion-content');
            if (parentContent && parentContent.style.maxHeight !== "0px") {
                // Use a slight delay to ensure the nested content's new height is factored in
                setTimeout(() => {
                    parentContent.style.maxHeight = parentContent.scrollHeight + 50 + "px";
                }, 200); 
            }
        }


        // Setup the initial elements
        document.addEventListener('DOMContentLoaded', () => {
            const accordion = document.getElementById('accordion');
            signsData.forEach((data, index) => {
                accordion.appendChild(createSignElement(data, index));
            });
            
            // Add global listener for nested buttons using event delegation
            document.addEventListener('click', (event) => {
                const button = event.target.closest('.nested-button');
                if (button) {
                    toggleNestedAccordion(button);
                }
            });
        });
    </script>
</body>
</html>

